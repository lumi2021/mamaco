; Program: placeholder
; 3 modules

module @TestCode {
	struct @Program : @System.Object {
		func @.ctor() void {	
			entry:
				ret
			
		}
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = 64
		field u64 @TestField = (u64 100)
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = 16
		field i16 @TestFieldShort = (i16 5)
	
		export "_start" func @Main() void {	
			entry:
				call void @System.Console.WriteLine("Hello, World!")
				call void @System.Console.WriteLine(@TestCode.Program.TestField)
				@TestCode.Program.TestField = u64 add (u64 5), (u64 10)
				@TestCode.Program.TestField = u64 mul @TestCode.Program.TestField, (u64 10)
				@TestCode.Program.TestFieldShort = (i16 5)
				@TestCode.Program.TestFieldShort = i16 add @TestCode.Program.TestFieldShort, (i16 5)
				ret
			
		}
	}

	struct @Test : @System.Object {
		func @.ctor() void {	
			entry:
				ret
			
		}
	}

	struct @Driving : @System.Object {
		func @.ctor() void {	
			entry:
				ret
			
		}
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = 1
		field u1 @_rightAfterABeer
	
		func @InYourCar(u1 rightAfterABeer) void {	
			entry:
				self->@TestCode.Driving._rightAfterABeer = %rightAfterABeer
				ret
			
		}
	
		func @InMyCar(u1 rightAfterABeer) void {	
			entry:
				self->@TestCode.Driving._rightAfterABeer = %rightAfterABeer
				ret
			
		}
	}
}
module @System {
	struct @Exception : @System.Object {
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = ptr * 2
		field []u8 @_message
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = ptr * 1
		field *@System.Exception @_innerException
	
		func @.ctor([]u8 message) void {	
			entry:
				call void self->@System.Exception..ctor(%message, (*@System.Exception null))
				ret
			
		}
	
		func @.ctor([]u8 message, *@System.Exception innerException) void {	
			entry:
				call initFields ()
				self->@System.Exception._message = %message
				self->@System.Exception._innerException = %innerException
				ret
			
		}
	
		func @ToString() []u8 {	
			entry:
				ret call []u8 @System.String.Concat("Exception: No allocator to concatenate this shit so ", "imagine an meaningfull error message here")
			
		}
	}

	namespace @Console {
		import "" "__write" func @__write(iptr fd, []u8 content) void {}
	
		func @Write([]u8 content) void {	
			entry:
				call void @System.Console.__write((i32 0), %content)
				ret
			
		}
	
		func @Write(i32 content) void {	
			entry:
				call void @System.Console.__write((i32 0), "TODO int.ToString()\0a")
				ret
			
		}
	
		func @Write(u32 content) void {	
			entry:
				call void @System.Console.__write((i32 0), "TODO int.ToString()\0a")
				ret
			
		}
	
		func @Write(i64 content) void {	
			entry:
				call void @System.Console.__write((i32 0), "TODO int.ToString()\0a")
				ret
			
		}
	
		func @Write(u64 content) void {	
			entry:
				call void @System.Console.__write((i32 0), "TODO int.ToString()\0a")
				ret
			
		}
	
		func @WriteLine([]u8 content) void {	
			entry:
				call void @System.Console.__write((i32 0), call []u8 @System.String.Concat(%content, "\0a"))
				ret
			
		}
	
		func @WriteLine(i32 content) void {	
			entry:
				call void @System.Console.__write((i32 0), "TODO int.ToString()\0a")
				ret
			
		}
	
		func @WriteLine(u32 content) void {	
			entry:
				call void @System.Console.__write((i32 0), "TODO int.ToString()\0a")
				ret
			
		}
	
		func @WriteLine(i64 content) void {	
			entry:
				call void @System.Console.__write((i32 0), "TODO int.ToString()\0a")
				ret
			
		}
	
		func @WriteLine(u64 content) void {	
			entry:
				call void @System.Console.__write((i32 0), "TODO int.ToString()\0a")
				ret
			
		}
	}

	struct @UnreachableException : @System.Exception {
		func @.ctor() void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(([]u8 null), (*@System.Exception null))
				ret
			
		}
	
		func @.ctor([]u8 message) void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(%message, (*@System.Exception null))
				ret
			
		}
	
		func @.ctor([]u8 message, *@System.Exception innerException) void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(%message, %innerException)
				ret
			
		}
	
		func @ToString() []u8 {	
			entry:
				ret "Exception: Trying to execute unreachable code"
			
		}
	}

	struct @ArgumentException : @System.Exception {
		func @.ctor() void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(([]u8 null), (*@System.Exception null))
				ret
			
		}
	
		func @.ctor([]u8 message) void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(%message, (*@System.Exception null))
				ret
			
		}
	
		func @.ctor([]u8 message, *@System.Exception innerException) void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(%message, %innerException)
				ret
			
		}
	
		func @ToString() []u8 {	
			entry:
				ret "Exception: Idk what this one specifically is"
			
		}
	}

	struct @OutOfMemoryException : @System.Exception {
		func @.ctor() void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(([]u8 null), (*@System.Exception null))
				ret
			
		}
	
		func @.ctor([]u8 message) void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(%message, (*@System.Exception null))
				ret
			
		}
	
		func @.ctor([]u8 message, *@System.Exception innerException) void {	
			entry:
				call initFields ()
				call void self->@System.Exception..ctor(%message, %innerException)
				ret
			
		}
	
		func @ToString() []u8 {	
			entry:
				ret "Exception: Out Of Memory"
			
		}
	}

	namespace @Reflection {
		struct @DefaultMemberAttribute : @System.Attribute {
			func @.ctor([]u8 memberName) void {	
				entry:
					call initFields ()
					ret
				
			}
		}
	}

	namespace @Runtime {
		namespace @CompilerServices {
			struct @IsExternalInit : @System.Object {}
		}
	
		namespace @InteropServices {
			namespace @NativeMemory {}
		}
	}

	struct @Attribute : @System.Object {}

	struct @Object {
		func @GetType() *@System.Type {	
			entry:
				*@System.Type %0 = call *opaque @<RealizerIntrinsicsModule>.AlignedAlloc((uptr 0), (uptr 0))
				call void @System.Type..ctor(*@System.Type %0, call *opaque @<RealizerIntrinsicsModule>.RealizerGetStructMetadataPointer(self))
				ret *@System.Type %0
			
		}
	
		func @ToString() []u8 {	
			entry:
				ret call *@System.Type self->@System.Object.GetType()->@System.Type.FullName
			
		}
	
		func @Equals(*@System.Object obj) u1 {	
			entry:
				ret cmp Equal call *@System.Object @<RealizerIntrinsicsModule>.RealizerGetObjectPointer(self), call *@System.Object @<RealizerIntrinsicsModule>.RealizerGetObjectPointer(%obj)
			
		}
	
		func @GetHashCode() i32 {	
			entry:
				ret (i32 0)
			
		}
	}

	struct @Type : @System.Object {
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = ptr * 1
		field *opaque @metadataPtr
	
		property []u8 @Name { get = @System.Type.get_Name }
	
		func @get_Name() []u8 {	
			entry:
				ret self->@System.Type.<Name>k__BackingField
			
		}
	
		property []u8 @FullName { get = @System.Type.get_FullName }
	
		func @get_FullName() []u8 {	
			entry:
				ret self->@System.Type.<FullName>k__BackingField
			
		}
	
		func @.ctor(*opaque metadataPtr) void {	
			entry:
				call initFields ()
				self->@System.Type.metadataPtr = %metadataPtr
				ret
			
		}
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = ptr * 2
		field []u8 @<Name>k__BackingField
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = ptr * 2
		field []u8 @<FullName>k__BackingField
	}

	struct @IntPtr : @System.ValueType {}

	struct @Decimal : @System.ValueType {}

	struct @UIntPtr : @System.ValueType {}

	struct @ValueType : @System.Object {}

	namespace @String {
		property i32 @Length { get = @<RealizerIntrinsicsModule>.get_Length }
	
		property u8 @this[] { get = @<RealizerIntrinsicsModule>.get_Item }
	
		func @Concat([]u8 str0, []u8 str1) []u8 {	
			entry:
				i32 %0 =  add %str0->@System.String.Length, %str1->@System.String.Length
				*opaque %1 = call *opaque @<RealizerIntrinsicsModule>.AlignedAlloc(i32 %0, (i32 1)) as *opaque
				i32 %2 = (i32 0)
				i32 %3 = (i32 0)
				branch 1
				
			while.condition:
				cbranch cmp UnsignedLessThan i32 %2, %str0->@System.String.Length, 2, 3
				
			while.execution:
				i32 %2 = i32 add i32 %2, (i32 1)
				i32 %3 = i32 add i32 %3, (i32 1)
				*opaque %1[i32 %2] = %str0[i32 %3]
				branch 1
				
			while.break:
				i32 %3 = (i32 0)
				branch 4
				
			while.condition:
				cbranch cmp UnsignedLessThan i32 %2, %str1->@System.String.Length, 5, 6
				
			while.execution:
				i32 %2 = i32 add i32 %2, (i32 1)
				i32 %3 = i32 add i32 %3, (i32 1)
				*opaque %1[i32 %2] = %str1[i32 %3]
				branch 4
				
			while.break:
				[]u8 %4 = call []u8 @<RealizerIntrinsicsModule>.String..ctor(*opaque %1, i32 %0)
				ret []u8 %4
			
		}
	}

	struct @Delegate : @System.Object {}

	namespace @Diagnostics {
		struct @UnreachableException : @System.Exception {
			func @.ctor() void {	
				entry:
					call initFields ()
					call void self->@System.Exception..ctor(([]u8 null), (*@System.Exception null))
					ret
				
			}
		
			func @.ctor([]u8 message) void {	
				entry:
					call initFields ()
					call void self->@System.Exception..ctor(%message, (*@System.Exception null))
					ret
				
			}
		
			func @.ctor([]u8 message, *@System.Exception innerException) void {	
				entry:
					call initFields ()
					call void self->@System.Exception..ctor(%message, %innerException)
					ret
				
			}
		}
	}

	struct @AttributeUsageAttribute : @System.Attribute {
		func @.ctor(@System.AttributeTargets validOn) void {	
			entry:
				ret
			
		}
	
		property @System.AttributeTargets @ValidOn { get = @System.AttributeUsageAttribute.get_ValidOn set = @System.AttributeUsageAttribute.set_ValidOn }
	
		func @get_ValidOn() @System.AttributeTargets {	
			entry:
				ret self->@System.AttributeUsageAttribute.<ValidOn>k__BackingField
			
		}
	
		func @set_ValidOn(@System.AttributeTargets value) void {	
			entry:
				self->@System.AttributeUsageAttribute.<ValidOn>k__BackingField = %value
				ret
			
		}
	
		property u1 @AllowMultiple { get = @System.AttributeUsageAttribute.get_AllowMultiple set = @System.AttributeUsageAttribute.set_AllowMultiple }
	
		func @get_AllowMultiple() u1 {	
			entry:
				ret self->@System.AttributeUsageAttribute.<AllowMultiple>k__BackingField
			
		}
	
		func @set_AllowMultiple(u1 value) void {	
			entry:
				self->@System.AttributeUsageAttribute.<AllowMultiple>k__BackingField = %value
				ret
			
		}
	
		property u1 @Inherited { get = @System.AttributeUsageAttribute.get_Inherited set = @System.AttributeUsageAttribute.set_Inherited }
	
		func @get_Inherited() u1 {	
			entry:
				ret self->@System.AttributeUsageAttribute.<Inherited>k__BackingField
			
		}
	
		func @set_Inherited(u1 value) void {	
			entry:
				self->@System.AttributeUsageAttribute.<Inherited>k__BackingField = %value
				ret
			
		}
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = 0
		field @System.AttributeTargets @<ValidOn>k__BackingField
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = 1
		field u1 @<AllowMultiple>k__BackingField
	
		; index = 0 bitAlignment = 0 bitOffset = 0  bitLength = 1
		field u1 @<Inherited>k__BackingField
	}

	struct @FlagsAttribute : @System.Attribute {
		func @.ctor() void {	
			entry:
				call initFields ()
				ret
			
		}
	}

	typedef @AttributeTargets {
		Assembly => (i32 1)
		Module => (i32 2)
		Class => (i32 4)
		Struct => (i32 8)
		Enum => (i32 16)
		Constructor => (i32 32)
		Method => (i32 64)
		Property => (i32 128)
		Field => (i32 256)
		Event => (i32 512)
		Interface => (i32 1024)
		Parameter => (i32 2048)
		Delegate => (i32 4096)
		ReturnValue => (i32 8192)
		GenericParameter => (i32 16384)
		All => (i32 32767)
	}

	namespace @Realizer {
		namespace @Intrinsics {}
	}
}
module @<RealizerIntrinsicsModule> {
	import "" "__aligned_alloc" func @AlignedAlloc(uptr length, uptr alignment) *opaque {}

	import "" "__aligned_free" func @AlignedFree(*opaque ptr) void {}

	import "" "__aligned_realloc" func @AlignedRealloc(*opaque ptr, uptr length, uptr alignment) *opaque {}

	import "" "__alloc" func @Alloc(uptr length) *opaque {}

	import "" "__free" func @Free(*opaque ptr) void {}

	import "" "__realloc" func @Realloc(*opaque ptr, uptr length) *opaque {}

	func @op_Implicit(i32 int32) uptr {	
		entry:
			ret %int32 as uptr
		
	}

	func @op_Implicit(*opaque ptr) uptr {	
		entry:
			ret %ptr as uptr
		
	}

	func @get_Length([]u8 str) i32 {	
		entry:
			ret lenof %str as i32
		
	}

	func @String..ctor(*opaque ptr, uptr length) []u8 {	
		entry:
			ret %ptr[..%length]
		
	}

	func @get_Item([]u8 str, i32 index) u8 {	
		entry:
			ret %str[%index]
		
	}

	func @RealizerGetStructMetadataPointer(*@System.Object object) *opaque {	
		entry:
			ret typeof %object
		
	}

	func @RealizerGetObjectPointer(*@System.Object object) *@System.Object {	
		entry:
			ret ref %object
		
	}
}
